:root {
  --primary-color: #4f46e5;
  --accent-color: #fbbf24;
  --text-white: #ffffff;
}

body {
  margin: 0;
  overflow: hidden; /* Prevents scrollbars */
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;

  /* IOS FIX: PREVENT DEFAULT WEB BEHAVIORS */
  overscroll-behavior-y: none;       /* Disables "pull-to-refresh" */
  -webkit-touch-callout: none;       /* Disables long-press menu */
  -webkit-user-select: none;         /* Disables text selection */
  user-select: none;
  -webkit-tap-highlight-color: transparent; /* Removes gray tap box */

  background-color: #ffffff; /* Changed to White for Hyper-casual look */
}

#app {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
}

/* UI CONTAINER */
#ui-layer {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 10;
  pointer-events: none;

  /* IOS FIX: ENSURE UI STAYS WITHIN SAFE AREAS */
  box-sizing: border-box;
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

#start-btn, #start-screen, #game-over.active, #pause-overlay.active {
  pointer-events: auto;
}

/* --- GAME OVER SCREEN --- */
#game-over {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 35;
  display: none;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background: rgba(20, 20, 40, 0.9);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
}

#game-over.active {
  display: flex;
  flex-direction: column;
}

#game-over .game-over-content {
  text-align: center;
  color: var(--text-white);
}

#game-over h2 {
  font-size: 2.5rem;
  margin: 0 0 12px 0;
  color: #ef4444;
}

#game-over p {
  margin: 0 0 24px 0;
  opacity: 0.9;
}

#game-over .game-over-buttons {
  display: flex;
  flex-direction: column;
  gap: 12px;
  align-items: center;
}

#game-over .game-over-buttons button {
  min-width: 220px;
  padding: 14px 28px;
  font-size: 1.1rem;
  font-weight: bold;
  border: none;
  border-radius: 50px;
  cursor: pointer;
  transition: transform 0.1s;
  -webkit-tap-highlight-color: transparent;
}

#game-over .game-over-buttons button:active {
  transform: scale(0.96);
}

#try-again-btn {
  background: var(--primary-color);
  color: var(--text-white);
  box-shadow: 0 4px 15px rgba(79, 70, 229, 0.4);
}

#watch-ad-btn {
  background: var(--accent-color);
  color: #1f2937;
}

#watch-ad-btn:disabled {
  opacity: 0.7;
  cursor: not-allowed;
}

/* --- VICTORY OVERLAY --- */
#victory-overlay {
  display: none;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 30;
  background: rgba(20, 20, 40, 0.85);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
}

#victory-overlay h2 {
  font-size: 4rem;
  font-weight: 900;
  color: var(--accent-color);
  text-shadow: 0 4px 0 #000;
  margin: 0;
  letter-spacing: 8px;
  text-transform: uppercase;
}

/* --- NEW MINIMAL HUD STYLES --- */
#game-hud {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  width: 100%;
  z-index: 20;
  pointer-events: none;
  box-sizing: border-box;

  display: flex;
  justify-content: center;
  align-items: center;
  padding: max(20px, env(safe-area-inset-top)) max(20px, env(safe-area-inset-right)) 0 max(20px, env(safe-area-inset-left));

  opacity: 0; /* Hidden initially until game starts */
  transition: opacity 0.5s ease;
}

#pause-btn {
  position: absolute;
  top: max(20px, env(safe-area-inset-top));
  right: max(20px, env(safe-area-inset-right));
  width: 44px;
  height: 44px;
  border: none;
  border-radius: 50%;
  background: rgba(0, 0, 0, 0.5);
  color: var(--text-white);
  font-size: 1.4rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  -webkit-tap-highlight-color: transparent;
  transition: background 0.2s;
  pointer-events: auto;
  flex-shrink: 0;
}

#pause-btn:hover {
  background: rgba(0, 0, 0, 0.7);
}

#pause-btn:active {
  transform: scale(0.95);
}

/* --- PAUSE OVERLAY --- */
#pause-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 25;
  display: none;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background: rgba(20, 20, 40, 0.85);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
}

#pause-overlay.active {
  display: flex;
}

#pause-overlay h2 {
  font-size: 2.5rem;
  color: var(--text-white);
  margin: 0 0 24px 0;
  letter-spacing: 4px;
}

#resume-btn {
  padding: 14px 40px;
  font-size: 1.2rem;
  font-weight: bold;
  border: none;
  border-radius: 50px;
  background: var(--primary-color);
  color: var(--text-white);
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
  transition: transform 0.1s;
}

#resume-btn:active {
  transform: scale(0.96);
}

#level-indicator-wrapper {
  flex: 1;
  display: flex;
  justify-content: center;
}

#level-indicator {
  font-size: 1.8rem;        /* Large, readable text */
  font-weight: 900;         /* Extra Bold */
  color: #000000;           /* Pure Black */
  letter-spacing: 1px;
  font-family: 'Arial Black', 'Helvetica Neue', sans-serif; /* Thick font */

  /* Subtle white outline/shadow to ensure it's readable if clouds pass behind */
  text-shadow: 2px 2px 0px rgba(255, 255, 255, 1);
}

/* --- START SCREEN STYLES --- */
#start-screen {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;

  /* Translucent Background */
  background: rgba(20, 20, 40, 0.6);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px); /* Safari support */

  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 40px;
  transition: opacity 0.5s ease;

  /* Ensure content doesn't get hidden by the Home Bar */
  padding-bottom: env(safe-area-inset-bottom);
}

h1 {
  font-size: 3rem;
  color: var(--text-white);
  text-transform: uppercase;
  letter-spacing: 4px;
  text-shadow: 0 4px 0 #000;
  margin: 0;
  font-style: italic;
  text-align: center;
}

#start-btn {
  background: var(--primary-color);
  color: var(--text-white);
  border: none;
  padding: 15px 40px;
  font-size: 1.5rem;
  font-weight: bold;
  border-radius: 50px;
  cursor: pointer;
  box-shadow: 0 10px 25px rgba(79, 70, 229, 0.5);
  transform: scale(1);
  animation: pulse 2s infinite;
  transition: transform 0.1s;

  -webkit-tap-highlight-color: transparent;
}

#start-btn:active {
  transform: scale(0.95);
}

/* --- ANIMATIONS --- */
.tutorial-container {
  text-align: center;
  color: rgba(255, 255, 255, 0.8);
}

.hand-icon {
  font-size: 3rem;
  animation: swipe-hand 2s ease-in-out infinite;
  display: inline-block;
}

@keyframes pulse {
  0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(79, 70, 229, 0.7); }
  70% { transform: scale(1.05); box-shadow: 0 0 0 15px rgba(79, 70, 229, 0); }
  100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(79, 70, 229, 0); }
}

@keyframes swipe-hand {
  0%, 100% { transform: translateX(0) rotate(0deg); }
  25% { transform: translateX(-30px) rotate(-10deg); }
  75% { transform: translateX(30px) rotate(10deg); }
}

/* --- LEVEL COMPLETE SCREEN --- */
#level-complete {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  
  /* Hidden by default */
  opacity: 0;
  pointer-events: none;
  
  /* Glassmorphism Background */
  background: rgba(255, 255, 255, 0.85);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 100; /* Highest priority */
  transition: opacity 0.5s ease;
}

/* Active State (Added via JS) */
#level-complete.active {
  opacity: 1;
  pointer-events: auto;
}

.victory-content {
  text-align: center;
  transform: scale(0.8);
  transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* Bouncy effect */
}

#level-complete.active .victory-content {
  transform: scale(1);
}

/* GOLD TEXT EFFECT */
#level-complete h1 {
  font-family: 'Arial Black', sans-serif;
  font-size: 4rem;
  margin: 0;
  
  /* Gradient Text */
  background: linear-gradient(to bottom, #FFD700, #FDB931, #C5960C);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  
  /* Gold Shadow/Glow */
  filter: drop-shadow(0px 2px 0px rgba(0,0,0,0.2));
  
  letter-spacing: 2px;
  animation: float 3s ease-in-out infinite;
}

.score-summary {
  font-size: 1.5rem;
  font-weight: bold;
  color: #555;
  margin-top: 10px;
  margin-bottom: 40px;
}

/* NEXT LEVEL BUTTON */
#next-level-btn {
  background: linear-gradient(135deg, #10b981, #059669); /* Emerald Green */
  color: white;
  border: none;
  padding: 18px 50px;
  font-size: 1.5rem;
  font-weight: 800;
  border-radius: 50px;
  box-shadow: 0 10px 20px rgba(16, 185, 129, 0.4);
  cursor: pointer;
  transition: transform 0.1s;
}

#next-level-btn:active {
  transform: scale(0.95);
}

/* --- CSS CONFETTI ANIMATION --- */
.confetti-container {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  pointer-events: none;
}

.confetti {
  position: absolute;
  width: 15px;
  height: 15px;
  background-color: #f00;
  top: -20px;
  opacity: 0;
}

/* Assign random colors and positions to the 10 confetti divs */
.confetti:nth-child(1) { left: 10%; background: #FFD700; animation: fall 2.5s infinite; animation-delay: 0.2s; }
.confetti:nth-child(2) { left: 20%; background: #ff0055; animation: fall 2.3s infinite; animation-delay: 0.5s; }
.confetti:nth-child(3) { left: 30%; background: #00ccff; animation: fall 2.7s infinite; animation-delay: 0.1s; }
.confetti:nth-child(4) { left: 40%; background: #aa00ff; animation: fall 2.4s infinite; animation-delay: 0.8s; }
.confetti:nth-child(5) { left: 50%; background: #00ffaa; animation: fall 2.6s infinite; animation-delay: 0.3s; }
.confetti:nth-child(6) { left: 60%; background: #ffaa00; animation: fall 2.2s infinite; animation-delay: 0.6s; }
.confetti:nth-child(7) { left: 70%; background: #FFD700; animation: fall 2.8s infinite; animation-delay: 0.2s; }
.confetti:nth-child(8) { left: 80%; background: #ff0055; animation: fall 2.4s infinite; animation-delay: 0.9s; }
.confetti:nth-child(9) { left: 90%; background: #00ccff; animation: fall 2.9s infinite; animation-delay: 0.4s; }
.confetti:nth-child(10){ left: 95%; background: #aa00ff; animation: fall 2.5s infinite; animation-delay: 0.7s; }

@keyframes fall {
  0% { top: -10%; transform: rotate(0deg) translateX(0); opacity: 1; }
  100% { top: 110%; transform: rotate(720deg) translateX(20px); opacity: 1; }
}

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}
